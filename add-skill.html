<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Add My Skill ‚Äì Skills Zone</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:#020617;
  color:#e5e7eb;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
}
.box{
  background:#0f172a;
  padding:30px;
  border-radius:14px;
  width:100%;
  max-width:400px;
}
h1{text-align:center}

select,textarea,input,button{
  width:100%;
  padding:12px;
  margin-top:12px;
  border-radius:8px;
  border:none;
}

button{
  background:#22c55e;
  font-size:16px;
  cursor:pointer;
}

.hidden{display:none}

.record-box{
  background:#020617;
  border:1px dashed #22c55e;
  padding:15px;
  border-radius:10px;
  text-align:center;
  margin-top:12px;
}

.record-btn{
  background:#ef4444;
  color:#fff;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="box">
  <h1>üéØ Add My Skill</h1>

  <select id="skill" onchange="changeInput()">
    <option value="">Select Skill</option>
    <option value="Writing">‚úç Writing</option>
    <option value="Drawing">üé® Drawing</option>
    <option value="Singing">üé§ Singing</option>
  </select>

  <!-- Writing -->
  <textarea id="textInput" class="hidden" placeholder="Write your content"></textarea>

  <!-- Drawing -->
  <input type="file" id="imageInput" class="hidden" accept="image/*">

  <!-- Singing -->
  <div id="singingBox" class="record-box hidden">
    <p>üéô Record your voice</p>
    <button class="record-btn" onclick="startRecord()">Start Recording</button>
    <button class="record-btn hidden" id="stopBtn" onclick="stopRecord()">Stop</button>
    <audio id="audioPreview" class="hidden" controls></audio>

    <p style="margin-top:10px">OR upload audio</p>
    <input type="file" id="audioFile" accept="audio/*">
  </div>

  <button onclick="submitSkill()">Submit Skill</button>
</div>

<script>
let recorder;
let audioBlob = null;

function changeInput(){
  const skill = document.getElementById("skill").value;

  document.getElementById("textInput").classList.add("hidden");
  document.getElementById("imageInput").classList.add("hidden");
  document.getElementById("singingBox").classList.add("hidden");

  if(skill === "Writing"){
    document.getElementById("textInput").classList.remove("hidden");
  }

  if(skill === "Drawing"){
    document.getElementById("imageInput").classList.remove("hidden");
  }

  if(skill === "Singing"){
    document.getElementById("singingBox").classList.remove("hidden");
  }
}

async function startRecord(){
  const stream = await navigator.mediaDevices.getUserMedia({audio:true});
  recorder = new MediaRecorder(stream);
  let chunks = [];

  recorder.ondataavailable = e => chunks.push(e.data);
  recorder.onstop = () => {
    audioBlob = new Blob(chunks, { type:"audio/webm" });
    const url = URL.createObjectURL(audioBlob);
    const audio = document.getElementById("audioPreview");
    audio.src = url;
    audio.classList.remove("hidden");
  };

  recorder.start();
  document.getElementById("stopBtn").classList.remove("hidden");
}

function stopRecord(){
  recorder.stop();
  document.getElementById("stopBtn").classList.add("hidden");
}

function submitSkill(){
  const skill = document.getElementById("skill").value;

  let content = null;

  if(skill === "Writing"){
    content = document.getElementById("textInput").value;
  }

  if(skill === "Drawing"){
    content = document.getElementById("imageInput").files[0];
  }

  if(skill === "Singing"){
    content = audioBlob || document.getElementById("audioFile").files[0];
  }

  if(!skill || !content){
    alert("‚ùå Please complete your submission");
    return;
  }

  alert("üéâ Skill submitted successfully!");
  window.location.href = "compitition-hub.html";
}
</script>

</body>
    </html>
